services:
  - type: web
    name: my-fastapi-app
    env: python
    plan: starter # 'free' is an option, but 'starter' has more resources

    # Set a specific, stable Python version to avoid build errors
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.8 # Or a different stable version like 3.10.13

    # Use a simplified build command since we no longer need torch
    buildCommand: |
      # Upgrade pip, setuptools, and wheel to prevent build errors
      pip install --upgrade pip setuptools wheel
      # Install the dependencies from requirements.txt
      pip install -r requirements.txt

    # The command to start the application
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT

    # A health check path to monitor the service
    healthCheckPath: /health # Make sure you have this endpoint in your app


    # A list of environment variables for your application
